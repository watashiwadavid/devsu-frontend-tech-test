<div class="card">
  <div class="card-header">Formulario de Registro</div>
  <div class="card-content">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="inputs-container">
        <div>
          <span>Id</span>
          <input
            type="text"
            formControlName="id"
            [readonly]="!!this.id"
            (ngModelChange)="handleIdChange()"
          />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.id }
            "
          />
        </div>

        <div>
          <span>Nombre</span>
          <input type="text" formControlName="name" />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.name }
            "
          />
        </div>

        <div>
          <span>Descripción</span>
          <input type="text" formControlName="description" />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.description }
            "
          />
        </div>

        <div>
          <span>Logo</span>
          <input type="text" formControlName="logo" />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.logo }
            "
          />
        </div>

        <div>
          <span>Fecha Liberación</span>
          <input
            type="date"
            formControlName="releaseDate"
            [min]="currentDate.toISOString().split('T')[0]"
          />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.releaseDate }
            "
          />
        </div>

        <div>
          <span>Fecha Revisión</span>
          <input type="date" formControlName="revisionDate" readonly />
          <ng-container
            *ngTemplateOutlet="
              formError;
              context: { control: form.controls.revisionDate }
            "
          />
        </div>
      </div>
      <div class="actions-container">
        <button
          class="secondary"
          type="button"
          [disabled]="form.pristine"
          (click)="onReset()"
        >
          Reiniciar
        </button>
        <button type="submit" class="primary">Enviar</button>
      </div>
    </form>
  </div>
</div>

<ng-template #formError let-control="control">
  <span class="form-error" *ngIf="control.dirty || control.touched">{{
    control.errorMessage
  }}</span>
</ng-template>
